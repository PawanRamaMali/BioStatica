<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BioStatica - Complete Guide to Biostatistics</title>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400;1,600&family=Source+Sans+3:ital,wght@0,400;0,600;0,700;1,400&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
    
    <!-- PDF Generation Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js"></script>
    <script>
        // Fallback for jsPDF if primary CDN fails
        if (typeof window.jspdf === 'undefined') {
            console.log('Primary jsPDF CDN failed, trying fallback...');
            var script = document.createElement('script');
            script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';
            script.onload = function() {
                console.log('Fallback jsPDF loaded successfully');
            };
            script.onerror = function() {
                console.error('Fallback jsPDF also failed to load');
            };
            document.head.appendChild(script);
        } else {
            console.log('jsPDF loaded from primary CDN');
        }
    </script>
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Crimson Text', Georgia, serif;
            font-size: 19px;
            line-height: 1.65;
            color: #1a202c;
            background: #fefefe;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Container for book-like layout */
        .container {
            max-width: 820px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Header */
        header {
            text-align: center;
            padding: 4rem 0 3rem;
            border-bottom: 3px solid #3182ce;
            margin-bottom: 3rem;
        }

        .title {
            font-family: 'Source Sans 3', -apple-system, BlinkMacSystemFont, sans-serif;
            font-size: 3.8rem;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 1rem;
            letter-spacing: -2px;
        }

        .subtitle {
            font-size: 1.35rem;
            color: #4a5568;
            font-style: italic;
            max-width: 600px;
            margin: 0 auto 2rem;
            line-height: 1.5;
        }

        .author {
            font-family: 'Source Sans 3', sans-serif;
            font-size: 1.1rem;
            color: #2d3748;
            margin-top: 2rem;
        }

        /* Table of Contents */
        .toc {
            background: #f7fafc;
            border-radius: 12px;
            padding: 2.5rem;
            margin: 3rem 0;
            border-left: 5px solid #3182ce;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
        }

        .toc h2 {
            font-family: 'Source Sans 3', sans-serif;
            font-size: 1.9rem;
            margin-bottom: 1.5rem;
            color: #1a202c;
            font-weight: 600;
        }

        .toc-list {
            list-style: none;
        }

        .toc-list li {
            margin-bottom: 0.9rem;
            padding-left: 1rem;
            position: relative;
        }

        .toc-list li::before {
            content: '→';
            position: absolute;
            left: 0;
            color: #3182ce;
            font-weight: bold;
        }

        .toc-list a {
            color: #2b6cb0;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
            font-family: 'Source Sans 3', sans-serif;
        }

        .toc-list a:hover {
            color: #1e40af;
            text-decoration: underline;
        }

        .chapter-number {
            font-weight: 700;
            margin-right: 0.5rem;
        }

        /* Enhanced Progress Tracker */
        .progress-tracker {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(145deg, #ffffff, #f8fafc);
            padding: 1.5rem;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.12), 0 2px 6px rgba(0,0,0,0.08);
            max-height: calc(100vh - 40px);
            overflow-y: auto;
            width: 280px;
            z-index: 100;
            border: 1px solid #e2e8f0;
            backdrop-filter: blur(10px);
        }

        .progress-tracker h3 {
            font-family: 'Source Sans 3', sans-serif;
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: #1a202c;
            font-weight: 600;
            text-align: center;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #e2e8f0;
        }

        .progress-section {
            margin-bottom: 1rem;
        }

        .progress-chapter {
            font-family: 'Source Sans 3', sans-serif;
            font-size: 0.9rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 0.5rem;
            padding: 0.4rem 0.8rem;
            background: #edf2f7;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-chapter::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 0;
            background: linear-gradient(135deg, #3182ce, #2c5aa0);
            transition: width 0.3s ease;
            z-index: -1;
        }

        .progress-chapter:hover {
            background: #e2e8f0;
            transform: translateX(2px);
        }

        .progress-chapter.active {
            background: #3182ce;
            color: white;
        }

        .progress-chapter.active::before {
            width: 100%;
        }

        .progress-chapter.completed {
            background: #38a169;
            color: white;
        }

        .progress-subsection {
            font-size: 0.8rem;
            margin-left: 1rem;
            margin-bottom: 0.3rem;
            padding: 0.3rem 0.6rem;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s ease;
            color: #4a5568;
            position: relative;
            font-family: 'Source Sans 3', sans-serif;
        }

        .progress-subsection:hover {
            background: #f1f5f9;
            color: #2d3748;
        }

        .progress-subsection.active {
            background: #bfdbfe;
            color: #1e40af;
            font-weight: 500;
        }

        .progress-subsection.completed::before {
            content: '✓';
            color: #38a169;
            font-weight: bold;
            margin-right: 0.5rem;
        }

        .reading-progress {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #e2e8f0;
            text-align: center;
        }

        .reading-progress-text {
            font-size: 0.8rem;
            color: #4a5568;
            margin-bottom: 0.5rem;
            font-family: 'Source Sans 3', sans-serif;
        }

        .reading-progress-bar {
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            overflow: hidden;
        }

        .reading-progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #3182ce, #38a169);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 3px;
        }

        /* Bookmark functionality */
        .bookmark-btn {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #f59e0b;
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            font-size: 12px;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            transition: all 0.2s ease;
        }

        .bookmark-btn:hover {
            background: #d97706;
            transform: scale(1.1);
        }

        .progress-chapter:hover .bookmark-btn {
            display: flex;
        }

        .bookmarked .bookmark-btn {
            display: flex;
            background: #dc2626;
        }

        /* Chapter Styles */
        .chapter {
            margin: 4rem 0;
            padding: 2rem 0;
            border-top: 2px solid #e2e8f0;
            position: relative;
        }

        .chapter:first-of-type {
            border-top: none;
        }

        .chapter-title {
            font-family: 'Source Sans 3', sans-serif;
            font-size: 2.6rem;
            color: #1a202c;
            margin-bottom: 2rem;
            text-align: center;
            position: relative;
            font-weight: 700;
            line-height: 1.2;
        }

        .chapter-title::after {
            content: '';
            display: block;
            width: 120px;
            height: 4px;
            background: linear-gradient(135deg, #3182ce, #2c5aa0);
            margin: 1.5rem auto;
            border-radius: 2px;
        }

        .chapter-intro {
            font-size: 1.3rem;
            color: #2d3748;
            font-style: italic;
            text-align: center;
            margin-bottom: 3rem;
            padding: 0 2rem;
            line-height: 1.6;
        }

        /* Section Styles */
        .section {
            margin-bottom: 3.5rem;
            position: relative;
        }

        .section-title {
            font-family: 'Source Sans 3', sans-serif;
            font-size: 1.9rem;
            color: #1a202c;
            margin-bottom: 1.5rem;
            padding-bottom: 0.7rem;
            border-bottom: 2px solid #3182ce;
            font-weight: 600;
            position: relative;
        }

        .difficulty-level {
            display: inline-block;
            padding: 0.4rem 1rem;
            border-radius: 25px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-family: 'Source Sans 3', sans-serif;
        }

        .beginner {
            background: #38a169;
            color: white;
        }

        .intermediate {
            background: #ed8936;
            color: white;
        }

        .advanced {
            background: #e53e3e;
            color: white;
        }

        /* Content Blocks */
        .concept-box {
            background: #ebf8ff;
            border-left: 5px solid #3182ce;
            padding: 1.8rem;
            margin: 2rem 0;
            border-radius: 0 12px 12px 0;
            box-shadow: 0 2px 12px rgba(0,0,0,0.05);
        }

        .concept-box h4 {
            color: #2c5aa0;
            margin-bottom: 1rem;
            font-size: 1.3rem;
            font-family: 'Source Sans 3', sans-serif;
            font-weight: 600;
        }

        .example-box {
            background: #f0fff4;
            border-left: 5px solid #38a169;
            padding: 1.8rem;
            margin: 2rem 0;
            border-radius: 0 12px 12px 0;
            box-shadow: 0 2px 12px rgba(0,0,0,0.05);
        }

        .example-box h4 {
            color: #2f855a;
            margin-bottom: 1rem;
            font-size: 1.3rem;
            font-family: 'Source Sans 3', sans-serif;
            font-weight: 600;
        }

        .formula-box {
            background: linear-gradient(145deg, #fef5e7, #fed7aa);
            border: 1px solid #f6ad55;
            padding: 2rem;
            margin: 2rem 0;
            border-radius: 12px;
            text-align: center;
            font-family: 'JetBrains Mono', 'Monaco', 'Consolas', monospace;
            font-size: 1.15rem;
            font-weight: 500;
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
            color: #744210;
        }

        .warning-box {
            background: #fffbeb;
            border-left: 5px solid #f59e0b;
            padding: 1.8rem;
            margin: 2rem 0;
            border-radius: 0 12px 12px 0;
            box-shadow: 0 2px 12px rgba(0,0,0,0.05);
        }

        .warning-box h4 {
            color: #d69e2e;
            margin-bottom: 1rem;
            font-size: 1.3rem;
            font-family: 'Source Sans 3', sans-serif;
            font-weight: 600;
        }

        /* Typography improvements */
        h4 {
            font-family: 'Source Sans 3', sans-serif;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #2d3748;
        }

        p {
            margin-bottom: 1.2rem;
            text-align: justify;
            hyphens: auto;
        }

        strong {
            font-weight: 600;
            color: #1a202c;
        }

        /* Lists */
        ul, ol {
            padding-left: 2rem;
            margin-bottom: 1.5rem;
        }

        li {
            margin-bottom: 0.6rem;
            text-align: justify;
        }

        /* Code */
        code {
            font-family: 'JetBrains Mono', 'Monaco', 'Consolas', monospace;
            background: #f7fafc;
            padding: 0.3rem 0.5rem;
            border-radius: 5px;
            font-size: 0.9em;
            color: #2d3748;
            border: 1px solid #e2e8f0;
        }

        pre {
            background: #1a202c;
            color: #e2e8f0;
            padding: 1.8rem;
            border-radius: 12px;
            overflow-x: auto;
            margin: 2rem 0;
            font-family: 'JetBrains Mono', 'Monaco', 'Consolas', monospace;
            font-size: 0.95rem;
            line-height: 1.5;
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .progress-tracker {
                width: 250px;
            }
        }

        @media (max-width: 1024px) {
            .progress-tracker {
                display: none;
            }
            
            /* Show a mobile PDF button when progress tracker is hidden */
            .mobile-pdf-btn {
                position: fixed;
                bottom: 20px;
                right: 20px;
                z-index: 100;
                background: linear-gradient(135deg, #3182ce, #2c5aa0);
                color: white;
                border: none;
                padding: 0.8rem 1.2rem;
                border-radius: 8px;
                font-size: 0.9rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                font-family: 'Source Sans 3', sans-serif;
                box-shadow: 0 4px 16px rgba(49, 130, 206, 0.3);
                white-space: nowrap;
                display: block;
            }
            
            .mobile-pdf-btn:hover {
                background: linear-gradient(135deg, #2c5aa0, #2a4d96);
                transform: translateY(-1px);
                box-shadow: 0 6px 20px rgba(49, 130, 206, 0.4);
            }
            
            .mobile-pdf-btn:disabled {
                background: #a0aec0;
                cursor: not-allowed;
                transform: none;
                box-shadow: none;
            }
        }

        /* Hide mobile button on larger screens */
        .mobile-pdf-btn {
            display: none;
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 1rem;
            }

            .title {
                font-size: 2.8rem;
            }

            .chapter-title {
                font-size: 2.2rem;
            }

            .toc {
                padding: 1.5rem;
            }

            body {
                font-size: 18px;
            }
        }

        /* Print Styles */
        @media print {
            .progress-tracker {
                display: none;
            }
            
            .chapter {
                page-break-before: always;
            }
        }

        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Reading indicators */
        .reading-time {
            color: #4a5568;
            font-size: 0.95rem;
            font-style: italic;
            margin-bottom: 1rem;
            font-family: 'Source Sans 3', sans-serif;
        }

        /* Interactive elements */
        .interactive-demo {
            background: #f7fafc;
            border: 2px dashed #a0aec0;
            padding: 2rem;
            margin: 2rem 0;
            border-radius: 12px;
            text-align: center;
            color: #4a5568;
            font-style: italic;
            font-family: 'Source Sans 3', sans-serif;
        }

        /* Scroll indicator */
        .scroll-indicator {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(135deg, #3182ce, #38a169);
            transform-origin: left;
            transform: scaleX(0);
            z-index: 101;
            transition: transform 0.3s ease;
        }

        /* PDF Download Container */
        .pdf-download-container {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #e2e8f0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* PDF Download Button */
        .pdf-download-btn {
            background: linear-gradient(135deg, #3182ce, #2c5aa0);
            color: white;
            border: none;
            padding: 0.6rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Source Sans 3', sans-serif;
            box-shadow: 0 2px 12px rgba(49, 130, 206, 0.3);
            white-space: nowrap;
        }

        .pdf-download-btn:hover {
            background: linear-gradient(135deg, #2c5aa0, #2a4d96);
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(49, 130, 206, 0.4);
        }

        .pdf-download-btn:active {
            transform: translateY(0);
        }

        .pdf-download-btn:disabled {
            background: #a0aec0;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* PDF generation status */
        .pdf-status {
            margin-top: 0.5rem;
            padding: 0.5rem 0.8rem;
            border-radius: 6px;
            font-family: 'Source Sans 3', sans-serif;
            font-size: 0.8rem;
            text-align: center;
            display: none;
            max-width: 260px;
            word-wrap: break-word;
        }

        .pdf-status.generating {
            background: #fef5e7;
            color: #744210;
            border: 1px solid #f6ad55;
            display: block;
        }

        .pdf-status.success {
            background: #f0fff4;
            color: #2f855a;
            border: 1px solid #68d391;
            display: block;
        }

        .pdf-status.error {
            background: #fed7d7;
            color: #c53030;
            border: 1px solid #fc8181;
            display: block;
        }
    </style>
</head>
<body>
    <div class="scroll-indicator" id="scrollIndicator"></div>
    
    <div class="container">
        <header>
            <h1 class="title">BioStatica</h1>
            <p class="subtitle">A Complete Guide to Biostatistics: From Foundations to Advanced Methods</p>
            <div class="author">
                <strong>By Pawan Rama Mali</strong><br>
                <em>A comprehensive textbook for beginners to experts</em>
            </div>
            
        </header>

        <div class="toc">
            <h2>Table of Contents</h2>
            <ul class="toc-list">
                <li><a href="#introduction"><span class="chapter-number">Introduction:</span> Welcome to Biostatistics</a></li>
                <li><a href="#chapter1"><span class="chapter-number">Chapter 1:</span> Foundational Concepts</a></li>
                <li><a href="#chapter2"><span class="chapter-number">Chapter 2:</span> Comparative Inference</a></li>
                <li><a href="#chapter3"><span class="chapter-number">Chapter 3:</span> Multi-Group Analysis</a></li>
                    <ul style="margin-left: 2rem; list-style: none; margin-top: 0.5rem;">
                        <li><a href="#section3-1" style="font-size: 0.95rem; color: #4a5568;">3.1 Introduction to ANOVA</a></li>
                        <li><a href="#section3-2" style="font-size: 0.95rem; color: #4a5568;">3.2 One-Way ANOVA: Step-by-Step</a></li>
                        <li><a href="#section3-3" style="font-size: 0.95rem; color: #4a5568;">3.3 Post-Hoc Tests</a></li>
                        <li><a href="#section3-4" style="font-size: 0.95rem; color: #4a5568;">3.4 Two-Way ANOVA</a></li>
                        <li><a href="#section3-5" style="font-size: 0.95rem; color: #4a5568;">3.5 Assumptions & Alternatives</a></li>
                    </ul>
                <li><a href="#chapter4"><span class="chapter-number">Chapter 4:</span> Interrelationships & Modeling</a></li>
                <li><a href="#chapter5"><span class="chapter-number">Chapter 5:</span> Design & Power Considerations</a></li>
                <li><a href="#chapter6"><span class="chapter-number">Chapter 6:</span> Specialized & Modern Methods</a></li>
            </ul>
        </div>

        <div id="introduction" class="chapter">
            <h2 class="chapter-title">Introduction: Welcome to Biostatistics</h2>
            <div class="reading-time">📖 Reading time: 5 minutes</div>
            <p class="chapter-intro">Biostatistics is the application of statistics to biological and health-related data. This field bridges the gap between mathematical theory and real-world medical research, helping us make sense of complex biological phenomena and draw meaningful conclusions from data.</p>

            <p>Whether you're a medical student beginning your research journey, a healthcare professional seeking to understand clinical studies, or a researcher diving into data analysis, this comprehensive guide will take you from basic concepts to advanced methodologies used in cutting-edge research.</p>

            <div class="concept-box">
                <h4>Why Biostatistics Matters</h4>
                <p>Every major medical breakthrough—from vaccine development to treatment protocols—relies on biostatistical methods. Understanding these concepts enables you to:</p>
                <ul>
                    <li>Critically evaluate medical literature</li>
                    <li>Design robust research studies</li>
                    <li>Analyze complex biological data</li>
                    <li>Make evidence-based decisions in healthcare</li>
                </ul>
            </div>

            <p>This textbook is structured to provide a logical progression from fundamental concepts to specialized applications. Each chapter builds upon previous knowledge while remaining accessible to readers at different levels of statistical background.</p>
        </div>

        <div id="chapter1" class="chapter">
            <h2 class="chapter-title">Chapter 1: Foundational Concepts</h2>
            <div class="reading-time">📖 Reading time: 45 minutes</div>
            <p class="chapter-intro">Master the essential building blocks of statistical thinking that form the foundation for all biostatistical analysis.</p>

            <div id="section1-1" class="section">
                <h3 class="section-title">1.1 Descriptive Statistics & Visualization</h3>
                <div class="difficulty-level beginner">Beginner</div>
                
                <p>Before diving into complex analyses, we must first understand how to describe and visualize our data. Descriptive statistics provide the first glimpse into what our data tells us.</p>

                <div class="concept-box">
                    <h4>Understanding Your Data</h4>
                    <p>Every dataset tells a story. Descriptive statistics help us understand:</p>
                    <ul>
                        <li><strong>Central Tendency:</strong> Where does the typical value lie?</li>
                        <li><strong>Variability:</strong> How spread out are our observations?</li>
                        <li><strong>Shape:</strong> Is the data symmetric or skewed?</li>
                        <li><strong>Outliers:</strong> Are there unusual observations?</li>
                    </ul>
                </div>

                <h4>Measures of Central Tendency</h4>
                
                <p><strong>Mean (Average):</strong> The arithmetic mean is the sum of all values divided by the number of observations. While intuitive, it's sensitive to extreme values.</p>

                <div class="formula-box">
                    Mean = Σx / n
                </div>

                <div class="example-box">
                    <h4>Example: Blood Pressure Study</h4>
                    <p>Consider systolic blood pressure measurements from 7 patients: 120, 125, 118, 140, 122, 135, 180</p>
                    <p>Mean = (120 + 125 + 118 + 140 + 122 + 135 + 180) / 7 = 134.3 mmHg</p>
                    <p>Notice how the outlier (180) pulls the mean upward.</p>
                </div>

                <p><strong>Median:</strong> The middle value when data is arranged in order. More robust to outliers than the mean.</p>

                <p><strong>Mode:</strong> The most frequently occurring value. Useful for categorical data or to identify peaks in distributions.</p>

                <h4>Measures of Variability</h4>

                <p><strong>Range:</strong> Simply the difference between maximum and minimum values. Easy to calculate but affected by outliers.</p>

                <p><strong>Standard Deviation:</strong> Measures how much individual observations deviate from the mean. This is perhaps the most important measure of variability in statistics.</p>

                <div class="formula-box">
                    Standard Deviation = √(Σ(x - mean)² / (n-1))
                </div>

                <div class="warning-box">
                    <h4>Common Mistake</h4>
                    <p>Always use n-1 (not n) in the denominator when calculating sample standard deviation. This provides an unbiased estimate of population variability.</p>
                </div>

                <p><strong>Variance:</strong> The square of standard deviation. While less intuitive (different units), it's mathematically convenient for many statistical procedures.</p>

                <h4>Data Visualization</h4>

                <p>Visual representation of data often reveals patterns invisible in raw numbers:</p>

                <p><strong>Histograms:</strong> Show the distribution shape and identify skewness, multiple peaks, or outliers.</p>

                <p><strong>Box Plots:</strong> Provide a five-number summary (minimum, Q1, median, Q3, maximum) and clearly highlight outliers.</p>

                <div class="example-box">
                    <h4>Interpreting Box Plots in Medical Research</h4>
                    <p>A box plot of recovery times after surgery might show:</p>
                    <ul>
                        <li>Median recovery: 7 days</li>
                        <li>Most patients recover between 5-10 days (IQR)</li>
                        <li>Some outliers taking 20+ days</li>
                        <li>Distribution skewed toward longer recovery times</li>
                    </ul>
                </div>

                <p><strong>Scatter Plots:</strong> Essential for examining relationships between two continuous variables.</p>

                <div class="interactive-demo">
                    <p>🔬 Interactive Demo Coming Soon: Explore how different data distributions affect summary statistics</p>
                </div>
            </div>

            <div id="section1-2" class="section">
                <h3 class="section-title">1.2 Probability & Distributions</h3>
                <div class="difficulty-level beginner">Beginner</div>

                <p>Probability theory provides the mathematical foundation for statistical inference. Understanding distributions helps us model real-world phenomena and calculate the likelihood of different outcomes.</p>

                <div class="concept-box">
                    <h4>What is Probability?</h4>
                    <p>Probability quantifies uncertainty. In medical research, we use probability to:</p>
                    <ul>
                        <li>Assess the likelihood of treatment success</li>
                        <li>Calculate confidence in our estimates</li>
                        <li>Determine sample sizes needed for studies</li>
                        <li>Evaluate the strength of evidence against hypotheses</li>
                    </ul>
                </div>

                <h4>Basic Probability Rules</h4>

                <p>1. <strong>Addition Rule:</strong> P(A or B) = P(A) + P(B) - P(A and B)</p>
                <p>2. <strong>Multiplication Rule:</strong> P(A and B) = P(A) × P(B|A)</p>
                <p>3. <strong>Complement Rule:</strong> P(not A) = 1 - P(A)</p>

                <div class="example-box">
                    <h4>Medical Example: Disease Testing</h4>
                    <p>Consider a diagnostic test for a rare disease:</p>
                    <ul>
                        <li>Disease prevalence: 1% (P(Disease) = 0.01)</li>
                        <li>Test sensitivity: 95% (P(Positive|Disease) = 0.95)</li>
                        <li>Test specificity: 90% (P(Negative|No Disease) = 0.90)</li>
                    </ul>
                    <p>What's the probability someone actually has the disease if they test positive?</p>
                    <p>This requires Bayes' theorem and often surprises medical professionals!</p>
                </div>

                <h4>The Normal Distribution</h4>

                <p>The normal (Gaussian) distribution is the cornerstone of statistical analysis. Many biological measurements naturally follow this bell-shaped curve.</p>

                <div class="concept-box">
                    <h4>Properties of Normal Distribution</h4>
                    <ul>
                        <li>Symmetric and bell-shaped</li>
                        <li>Mean = Median = Mode</li>
                        <li>68% of data within 1 standard deviation</li>
                        <li>95% of data within 2 standard deviations</li>
                        <li>99.7% of data within 3 standard deviations</li>
                    </ul>
                </div>

                <p>Examples of normally distributed biological variables:</p>
                <ul>
                    <li>Height and weight in populations</li>
                    <li>Blood pressure readings</li>
                    <li>IQ scores</li>
                    <li>Many laboratory test results</li>
                </ul>

                <h4>The t-Distribution</h4>

                <p>When working with small samples (n < 30), the t-distribution becomes crucial. It's similar to the normal distribution but with heavier tails, accounting for additional uncertainty from small sample sizes.</p>

                <div class="warning-box">
                    <h4>When to Use t vs Normal</h4>
                    <p>Use t-distribution when:</p>
                    <ul>
                        <li>Sample size is small (n < 30)</li>
                        <li>Population standard deviation is unknown</li>
                        <li>Data is approximately normally distributed</li>
                    </ul>
                </div>
            </div>

            <div id="section1-3" class="section">
                <h3 class="section-title">1.3 Sampling & Sampling Distributions</h3>
                <div class="difficulty-level intermediate">Intermediate</div>

                <p>Understanding how samples relate to populations is fundamental to statistical inference. The Central Limit Theorem bridges individual observations to population-level conclusions.</p>

                <div class="concept-box">
                    <h4>Population vs Sample</h4>
                    <p><strong>Population:</strong> All possible subjects of interest (e.g., all patients with diabetes)</p>
                    <p><strong>Sample:</strong> A subset of the population we actually observe (e.g., 100 diabetic patients in our study)</p>
                    <p>We use sample statistics to estimate population parameters.</p>
                </div>

                <h4>Sampling Methods</h4>

                <p><strong>Simple Random Sampling:</strong> Every member has equal chance of selection.</p>

                <p><strong>Stratified Sampling:</strong> Population divided into groups (strata), then random sampling within each group.</p>

                <div class="example-box">
                    <h4>Stratified Sampling in Clinical Trials</h4>
                    <p>When studying a new cardiac medication, researchers might stratify by:</p>
                    <ul>
                        <li>Age groups (18-40, 41-65, 65+)</li>
                        <li>Gender</li>
                        <li>Severity of condition</li>
                    </ul>
                    <p>This ensures adequate representation across important subgroups.</p>
                </div>

                <h4>The Central Limit Theorem</h4>

                <p>This fundamental theorem states that sample means will be approximately normally distributed, regardless of the population distribution, as sample size increases (typically n ≥ 30).</p>

                <div class="concept-box">
                    <h4>Implications of Central Limit Theorem</h4>
                    <ul>
                        <li>We can use normal distribution for inference about means</li>
                        <li>Larger samples give more precise estimates</li>
                        <li>We can calculate confidence intervals and p-values</li>
                        <li>Many statistical tests are based on this principle</li>
                    </ul>
                </div>

                <div class="formula-box">
                    Standard Error of Mean = σ / √n
                </div>

                <p>The standard error quantifies how much sample means vary from the true population mean.</p>
            </div>

            <div id="section1-4" class="section">
                <h3 class="section-title">1.4 Point & Interval Estimation</h3>
                <div class="difficulty-level intermediate">Intermediate</div>

                <p>Estimation allows us to use sample data to make educated guesses about population parameters, with quantified uncertainty.</p>

                <h4>Point Estimation</h4>

                <p>A point estimate is a single value that serves as our "best guess" for a population parameter.</p>

                <div class="example-box">
                    <h4>Point Estimates in Medicine</h4>
                    <ul>
                        <li>Sample mean blood pressure → Population mean blood pressure</li>
                        <li>Sample proportion cured → Population cure rate</li>
                        <li>Sample correlation → Population correlation</li>
                    </ul>
                </div>

                <h4>Interval Estimation (Confidence Intervals)</h4>

                <p>While point estimates provide a single value, confidence intervals provide a range of plausible values for the population parameter.</p>

                <div class="concept-box">
                    <h4>Interpreting Confidence Intervals</h4>
                    <p>A 95% confidence interval means:</p>
                    <p>"If we repeated this study 100 times, approximately 95 of the resulting confidence intervals would contain the true population parameter."</p>
                </div>

                <div class="formula-box">
                    95% CI for mean = x̄ ± t(0.025, df) × (s/√n)
                </div>

                <div class="example-box">
                    <h4>Clinical Example</h4>
                    <p>A new pain medication reduces pain scores by an average of 3.2 points (95% CI: 2.1 to 4.3).</p>
                    <p><strong>Interpretation:</strong> We're 95% confident the true average reduction is between 2.1 and 4.3 points.</p>
                </div>

                <div class="warning-box">
                    <h4>Common Misinterpretation</h4>
                    <p>❌ "There's a 95% chance the true mean is in this interval"</p>
                    <p>✅ "95% of such intervals would contain the true mean"</p>
                </div>
            </div>

            <div id="section1-5" class="section">
                <h3 class="section-title">1.5 Hypothesis Testing Framework</h3>
                <div class="difficulty-level intermediate">Intermediate</div>

                <p>Hypothesis testing provides a structured approach to making decisions under uncertainty, fundamental to scientific research.</p>

                <div class="concept-box">
                    <h4>The Logic of Hypothesis Testing</h4>
                    <p>We start with a skeptical position (null hypothesis) and ask: "Is our observed data surprising enough to abandon this position?"</p>
                </div>

                <h4>Setting Up Hypotheses</h4>

                <p><strong>Null Hypothesis (H₀):</strong> The "no effect" or "status quo" hypothesis. What we assume is true until proven otherwise.</p>

                <p><strong>Alternative Hypothesis (H₁ or Hₐ):</strong> The research hypothesis we're trying to establish.</p>

                <div class="example-box">
                    <h4>Hypothesis Example: New Treatment</h4>
                    <p>Research question: "Does new drug X reduce blood pressure more than placebo?"</p>
                    <ul>
                        <li><strong>H₀:</strong> Drug X has no effect (μ_drug = μ_placebo)</li>
                        <li><strong>H₁:</strong> Drug X reduces blood pressure (μ_drug < μ_placebo)</li>
                    </ul>
                </div>

                <h4>Types of Errors in Statistical Testing</h4>

                <p>Statistical testing is not perfect—we can make two types of errors when making decisions about hypotheses. Understanding these errors is crucial for interpreting research results and making informed decisions.</p>

                <div class="concept-box">
                    <h4>The Truth Table of Statistical Decisions</h4>
                    <p>When conducting a hypothesis test, there are four possible outcomes:</p>
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem; font-family: 'Source Sans 3', sans-serif;">
                        <tr style="background: #e2e8f0;">
                            <td style="border: 1px solid #a0aec0; padding: 0.8rem; font-weight: 600;"></td>
                            <td style="border: 1px solid #a0aec0; padding: 0.8rem; text-align: center; font-weight: 600;">H₀ is True</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.8rem; text-align: center; font-weight: 600;">H₀ is False</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #a0aec0; padding: 0.8rem; font-weight: 600;">Reject H₀</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.8rem; text-align: center; background: #fed7d7; color: #c53030;">Type I Error (α)</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.8rem; text-align: center; background: #c6f6d5; color: #2f855a;">Correct Decision</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #a0aec0; padding: 0.8rem; font-weight: 600;">Fail to Reject H₀</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.8rem; text-align: center; background: #c6f6d5; color: #2f855a;">Correct Decision</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.8rem; text-align: center; background: #fed7d7; color: #c53030;">Type II Error (β)</td>
                        </tr>
                    </table>
                </div>

                <h4>Type I Error (α): False Positive</h4>

                <p><strong>Definition:</strong> Rejecting a true null hypothesis—concluding there is an effect when there really isn't one.</p>

                <p><strong>Probability:</strong> The significance level (α) represents the maximum Type I error rate we're willing to accept, typically set at 0.05 (5%).</p>

                <div class="example-box">
                    <h4>Type I Error Examples</h4>
                    
                    <p><strong>Example 1: Drug Testing</strong></p>
                    <ul>
                        <li><strong>H₀:</strong> New drug has no effect (same as placebo)</li>
                        <li><strong>Truth:</strong> Drug actually has no effect</li>
                        <li><strong>Type I Error:</strong> Study concludes drug is effective</li>
                        <li><strong>Consequences:</strong> Ineffective drug approved, wasting resources and potentially exposing patients to unnecessary side effects</li>
                    </ul>

                    <p><strong>Example 2: Diagnostic Testing</strong></p>
                    <ul>
                        <li><strong>H₀:</strong> Patient does not have disease</li>
                        <li><strong>Truth:</strong> Patient is actually healthy</li>
                        <li><strong>Type I Error:</strong> Test indicates patient has disease (false positive)</li>
                        <li><strong>Consequences:</strong> Unnecessary anxiety, additional testing, and potentially harmful treatments</li>
                    </ul>

                    <p><strong>Example 3: Quality Control</strong></p>
                    <ul>
                        <li><strong>H₀:</strong> Manufacturing process is working correctly</li>
                        <li><strong>Truth:</strong> Process is actually working fine</li>
                        <li><strong>Type I Error:</strong> Conclude process is faulty</li>
                        <li><strong>Consequences:</strong> Unnecessary production shutdown, wasted time and money investigating non-existent problems</li>
                    </ul>
                </div>

                <div class="warning-box">
                    <h4>Controlling Type I Error</h4>
                    <p>We control Type I error by setting the significance level (α) before conducting our test:</p>
                    <ul>
                        <li><strong>α = 0.05:</strong> 5% chance of Type I error (most common)</li>
                        <li><strong>α = 0.01:</strong> 1% chance of Type I error (more stringent)</li>
                        <li><strong>α = 0.10:</strong> 10% chance of Type I error (more lenient)</li>
                    </ul>
                    <p><em>Lowering α reduces Type I errors but increases Type II errors.</em></p>
                </div>

                <h4>Type II Error (β): False Negative</h4>

                <p><strong>Definition:</strong> Failing to reject a false null hypothesis—missing a real effect that actually exists.</p>

                <p><strong>Statistical Power:</strong> Power = 1 - β, represents the probability of correctly detecting an effect when it truly exists.</p>

                <div class="example-box">
                    <h4>Type II Error Examples</h4>
                    
                    <p><strong>Example 1: Drug Testing</strong></p>
                    <ul>
                        <li><strong>H₀:</strong> New drug has no effect</li>
                        <li><strong>Truth:</strong> Drug is actually effective</li>
                        <li><strong>Type II Error:</strong> Study fails to detect drug's effectiveness</li>
                        <li><strong>Consequences:</strong> Effective treatment not approved, patients continue suffering from treatable condition</li>
                    </ul>

                    <p><strong>Example 2: Diagnostic Testing</strong></p>
                    <ul>
                        <li><strong>H₀:</strong> Patient does not have disease</li>
                        <li><strong>Truth:</strong> Patient actually has the disease</li>
                        <li><strong>Type II Error:</strong> Test fails to detect disease (false negative)</li>
                        <li><strong>Consequences:</strong> Delayed treatment, disease progression, potentially fatal outcomes</li>
                    </ul>

                    <p><strong>Example 3: Environmental Monitoring</strong></p>
                    <ul>
                        <li><strong>H₀:</strong> Pollution levels are safe</li>
                        <li><strong>Truth:</strong> Pollution levels are actually dangerous</li>
                        <li><strong>Type II Error:</strong> Fail to detect dangerous pollution</li>
                        <li><strong>Consequences:</strong> Continued exposure to harmful substances, public health risks</li>
                    </ul>
                </div>

                <div class="concept-box">
                    <h4>Factors Affecting Type II Error (β)</h4>
                    <p>Several factors influence the probability of Type II error:</p>
                    <ul>
                        <li><strong>Effect Size:</strong> Larger true effects are easier to detect (lower β)</li>
                        <li><strong>Sample Size:</strong> Larger samples reduce β</li>
                        <li><strong>Significance Level (α):</strong> Higher α reduces β</li>
                        <li><strong>Variability:</strong> Less noisy data reduces β</li>
                        <li><strong>Study Design:</strong> Better designs reduce β</li>
                    </ul>
                </div>

                <h4>Real-World Clinical Example: COVID-19 Testing</h4>

                <div class="example-box">
                    <h4>Understanding Both Error Types in Practice</h4>
                    
                    <p><strong>Scenario:</strong> Testing for COVID-19 infection</p>
                    <p><strong>H₀:</strong> Person is not infected with COVID-19</p>
                    <p><strong>H₁:</strong> Person is infected with COVID-19</p>

                    <p><strong>Type I Error (False Positive):</strong></p>
                    <ul>
                        <li>Test says "infected" when person is actually healthy</li>
                        <li>Rate: Depends on test specificity (1 - specificity)</li>
                        <li>Consequences: Unnecessary quarantine, contact tracing, anxiety</li>
                        <li>Public health impact: Resource waste, reduced public confidence</li>
                    </ul>

                    <p><strong>Type II Error (False Negative):</strong></p>
                    <ul>
                        <li>Test says "not infected" when person is actually infected</li>
                        <li>Rate: Depends on test sensitivity (1 - sensitivity)</li>
                        <li>Consequences: Continued spread, no treatment, false security</li>
                        <li>Public health impact: Disease transmission, outbreak expansion</li>
                    </ul>

                    <p><strong>The Trade-off:</strong> During a pandemic, false negatives (Type II errors) are often considered more dangerous than false positives (Type I errors) because missing infected individuals leads to continued disease spread.</p>
                </div>

                <h4>The Relationship Between Error Types</h4>

                <div class="concept-box">
                    <h4>Key Insights About Statistical Errors</h4>
                    <ul>
                        <li><strong>Inverse Relationship:</strong> Generally, as Type I error decreases, Type II error increases</li>
                        <li><strong>Sample Size Effect:</strong> Larger samples reduce both types of errors</li>
                        <li><strong>Effect Size Matters:</strong> Larger true effects make Type II errors less likely</li>
                        <li><strong>Context Dependent:</strong> The relative cost of each error type varies by situation</li>
                        <li><strong>Power Analysis:</strong> Helps balance these errors when designing studies</li>
                    </ul>
                </div>

                <div class="formula-box">
                    Key Relationships:<br>
                    Power = 1 - β<br>
                    P(Type I Error) = α<br>
                    P(Type II Error) = β<br>
                    As n ↑, both α and β ↓ (for fixed effect size)
                </div>

                <h4>Practical Guidelines for Researchers</h4>

                <div class="warning-box">
                    <h4>Choosing Error Tolerances</h4>
                    <p><strong>When Type I errors are more serious:</strong></p>
                    <ul>
                        <li>Drug approval studies (don't approve ineffective drugs)</li>
                        <li>Diagnostic tests for serious conditions</li>
                        <li>Use lower α (0.01 or 0.001)</li>
                    </ul>

                    <p><strong>When Type II errors are more serious:</strong></p>
                    <ul>
                        <li>Screening for treatable conditions</li>
                        <li>Safety monitoring studies</li>
                        <li>Use higher α (0.10) or ensure high power (0.90+)</li>
                    </ul>
                </div>

                <div class="concept-box">
                    <h4>Medical Context Summary</h4>
                    <p><strong>Type I Error (False Positive):</strong> Concluding a treatment works when it doesn't, a diagnostic test is positive when disease is absent, or an intervention has an effect when it doesn't.</p>
                    <p><strong>Type II Error (False Negative):</strong> Failing to detect a treatment that actually works, missing a disease that is present, or failing to identify a real intervention effect.</p>
                    <p><strong>Clinical Impact:</strong> Both errors have serious consequences in healthcare—unnecessary treatments and missed diagnoses can both harm patients.</p>
                </div>

                <h4>P-values</h4>

                <p>The p-value answers: "If the null hypothesis were true, what's the probability of observing data as extreme or more extreme than what we actually observed?"</p>

                <div class="warning-box">
                    <h4>P-value Misconceptions</h4>
                    <p>❌ "P-value is the probability the null hypothesis is true"</p>
                    <p>❌ "P-value is the probability of making a mistake"</p>
                    <p>✅ "P-value is the probability of observing such data if null hypothesis is true"</p>
                </div>

                <p><strong>Statistical Significance:</strong> Typically, p < 0.05 is considered statistically significant, meaning we reject the null hypothesis.</p>
            </div>

            <div id="section1-6" class="section">
                <h3 class="section-title">1.6 One-Sample & Two-Sample t-Tests</h3>
                <div class="difficulty-level intermediate">Intermediate</div>

                <p>T-tests are among the most commonly used statistical tests in biomedical research, allowing us to compare means between groups or against known values.</p>

                <h4>One-Sample t-Test</h4>

                <p>Compares a sample mean to a known population value or theoretical expectation.</p>

                <div class="example-box">
                    <h4>One-Sample Example</h4>
                    <p>Normal body temperature is supposedly 98.6°F. We measure 25 healthy adults and want to test if the population mean differs from 98.6°F.</p>
                    <ul>
                        <li><strong>H₀:</strong> μ = 98.6°F</li>
                        <li><strong>H₁:</strong> μ ≠ 98.6°F</li>
                    </ul>
                </div>

                <div class="formula-box">
                    t = (x̄ - μ₀) / (s/√n)
                    <br>df = n - 1
                </div>

                <h4>Two-Sample t-Test (Equal Variances)</h4>

                <p>Compares means between two independent groups, assuming equal population variances.</p>

                <div class="concept-box">
                    <h4>Assumptions for Two-Sample t-Test</h4>
                    <ul>
                        <li>Both samples from normal distributions</li>
                        <li>Independent observations</li>
                        <li>Equal population variances (homoscedasticity)</li>
                    </ul>
                </div>

                <p>The <strong>pooled standard deviation</strong> combines information from both samples:</p>

                <div class="formula-box">
                    s_pooled = √[((n₁-1)s₁² + (n₂-1)s₂²) / (n₁+n₂-2)]
                    <br><br>
                    t = (x̄₁ - x̄₂) / (s_pooled × √(1/n₁ + 1/n₂))
                </div>

                <div class="example-box">
                    <h4>Clinical Trial Example</h4>
                    <p>Comparing pain scores between treatment and control groups:</p>
                    <ul>
                        <li><strong>Treatment group:</strong> n=20, mean=4.2, sd=1.8</li>
                        <li><strong>Control group:</strong> n=18, mean=6.1, sd=2.1</li>
                        <li><strong>Question:</strong> Does treatment reduce pain scores?</li>
                    </ul>
                </div>

                <h4>When to Use Pooled vs Unpooled (Welch's) t-Test</h4>

                <div class="warning-box">
                    <h4>Testing Equal Variances</h4>
                    <p>Use F-test or Levene's test to check equal variance assumption. If p > 0.05, variances are likely equal and pooled t-test is appropriate.</p>
                </div>

                <p>The pooled t-test is more powerful when variances are truly equal, but Welch's t-test is more robust when they're not.</p>
            </div>
        </div>

        <!-- Additional chapters would continue here... -->
        <!-- For brevity, I'm including just a few more sections -->

        <div id="chapter2" class="chapter">
            <h2 class="chapter-title">Chapter 2: Comparative Inference</h2>
            <div class="reading-time">📖 Reading time: 35 minutes</div>
            <p class="chapter-intro">Advanced techniques for comparing groups when traditional assumptions don't hold, ensuring robust statistical inference across diverse research scenarios.</p>

            <div id="section2-1" class="section">
                <h3 class="section-title">2.1 Welch's t-Test & Paired t-Test</h3>
                <div class="difficulty-level intermediate">Intermediate</div>

                <p>When the equal variance assumption is violated or when data comes in natural pairs, we need specialized approaches to maintain valid statistical inference.</p>

                <h4>Welch's t-Test (Unequal Variances)</h4>

                <p>When group variances differ substantially, the pooled t-test can give misleading results. Welch's t-test adjusts for unequal variances.</p>

                <div class="formula-box">
                    t = (x̄₁ - x̄₂) / √(s₁²/n₁ + s₂²/n₂)
                    <br><br>
                    df = (s₁²/n₁ + s₂²/n₂)² / [(s₁²/n₁)²/(n₁-1) + (s₂²/n₂)²/(n₂-1)]
                </div>

                <div class="example-box">
                    <h4>When Variances Differ</h4>
                    <p>Comparing recovery times between two surgical procedures:</p>
                    <ul>
                        <li><strong>Procedure A:</strong> mean=7 days, sd=2 days (low variability)</li>
                        <li><strong>Procedure B:</strong> mean=8 days, sd=5 days (high variability)</li>
                    </ul>
                    <p>The large difference in standard deviations suggests using Welch's t-test.</p>
                </div>
            </div>
        </div>

        <!-- Continuing with other chapters... -->
        <div id="chapter3" class="chapter">
            <h2 class="chapter-title">Chapter 3: Multi-Group Analysis</h2>
            <div class="reading-time">📖 Reading time: 60 minutes</div>
            <p class="chapter-intro">When research involves comparing three or more groups, specialized techniques prevent inflated error rates while maintaining statistical power.</p>

            <div id="section3-1" class="section">
                <h3 class="section-title">3.1 Introduction to ANOVA (Analysis of Variance)</h3>
                <div class="difficulty-level intermediate">Intermediate</div>
                
                <p>When comparing means across three or more groups, using multiple t-tests creates a serious statistical problem: <strong>multiple comparisons</strong>. ANOVA provides an elegant solution by testing all groups simultaneously while controlling error rates.</p>

                <div class="warning-box">
                    <h4>Why Not Multiple t-Tests?</h4>
                    <p>With 3 groups, you'd need 3 t-tests. With α = 0.05 for each test:</p>
                    <ul>
                        <li><strong>Individual error rate:</strong> 5% per test</li>
                        <li><strong>Family-wise error rate:</strong> 1 - (0.95)³ = 14.3%</li>
                        <li><strong>Problem:</strong> Much higher chance of false positives!</li>
                    </ul>
                    <p>With 5 groups, you'd need 10 tests, inflating error rate to ~40%!</p>
                </div>

                <div class="concept-box">
                    <h4>The Logic of ANOVA</h4>
                    <p>ANOVA compares two sources of variation:</p>
                    <ul>
                        <li><strong>Between-groups variation:</strong> Differences due to treatment effects</li>
                        <li><strong>Within-groups variation:</strong> Random variation (noise)</li>
                    </ul>
                    <p><strong>Key Insight:</strong> If treatment has no effect, both sources should be similar. If there's a real effect, between-groups variation will be much larger.</p>
                </div>

                <h4>ANOVA Hypotheses</h4>
                
                <p><strong>Null Hypothesis (H₀):</strong> All group means are equal</p>
                <p>H₀: μ₁ = μ₂ = μ₃ = ... = μₖ</p>
                
                <p><strong>Alternative Hypothesis (H₁):</strong> At least one group mean differs</p>
                <p>H₁: Not all μᵢ are equal</p>

                <div class="example-box">
                    <h4>Medical Research Example</h4>
                    <p><strong>Research Question:</strong> Do three different pain medications have different effectiveness?</p>
                    <ul>
                        <li><strong>Group 1:</strong> Medication A (n=25)</li>
                        <li><strong>Group 2:</strong> Medication B (n=23)</li>
                        <li><strong>Group 3:</strong> Placebo (n=27)</li>
                        <li><strong>Outcome:</strong> Pain reduction score (0-10 scale)</li>
                    </ul>
                    <p><strong>H₀:</strong> μₐ = μᵦ = μₚₗₐᶜₑᵦₒ (all medications equally effective)</p>
                    <p><strong>H₁:</strong> At least one medication differs in effectiveness</p>
                </div>

                <h4>The F-Statistic</h4>

                <p>ANOVA uses the F-statistic to compare variances:</p>

                <div class="formula-box">
                    F = MSB / MSW
                    <br><br>
                    where:
                    <br>MSB = Mean Square Between groups
                    <br>MSW = Mean Square Within groups
                </div>

                <div class="concept-box">
                    <h4>Understanding the F-Ratio</h4>
                    <ul>
                        <li><strong>F ≈ 1:</strong> Between-group variation similar to within-group variation → No treatment effect</li>
                        <li><strong>F >> 1:</strong> Between-group variation much larger → Likely treatment effect</li>
                        <li><strong>F < 1:</strong> Rare, suggests less variation between groups than within (unusual)</li>
                    </ul>
                </div>

                <h4>ANOVA Assumptions</h4>

                <div class="warning-box">
                    <h4>Critical Assumptions</h4>
                    <ul>
                        <li><strong>Independence:</strong> Observations must be independent</li>
                        <li><strong>Normality:</strong> Data in each group should be approximately normal</li>
                        <li><strong>Homoscedasticity:</strong> Equal variances across all groups</li>
                    </ul>
                    <p><strong>Violation Consequences:</strong> Increased Type I error, reduced power, invalid conclusions</p>
                </div>

                <div class="example-box">
                    <h4>Checking Assumptions in Practice</h4>
                    <p><strong>Independence:</strong> Ensure proper randomization and no clustering</p>
                    <p><strong>Normality:</strong></p>
                    <ul>
                        <li>Visual: Q-Q plots, histograms for each group</li>
                        <li>Statistical: Shapiro-Wilk test (if n < 50)</li>
                        <li>Robust: ANOVA reasonably robust with n > 30 per group</li>
                    </ul>
                    <p><strong>Equal Variances:</strong></p>
                    <ul>
                        <li>Visual: Box plots, side-by-side</li>
                        <li>Statistical: Levene's test (preferred), Bartlett's test</li>
                        <li>Rule of thumb: Largest SD / Smallest SD < 2</li>
                    </ul>
                </div>
            </div>

            <div id="section3-2" class="section">
                <h3 class="section-title">3.2 One-Way ANOVA: Step-by-Step</h3>
                <div class="difficulty-level intermediate">Intermediate</div>

                <p>One-way ANOVA compares means across groups defined by a single categorical variable (factor).</p>

                <h4>ANOVA Table Components</h4>

                <div class="concept-box">
                    <h4>Understanding ANOVA Table</h4>
                    <table style="width: 100%; border-collapse: collapse; margin: 1rem 0; font-family: 'Source Sans 3', sans-serif;">
                        <tr style="background: #e2e8f0;">
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem; font-weight: 600;">Source</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem; font-weight: 600;">df</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem; font-weight: 600;">SS</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem; font-weight: 600;">MS</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem; font-weight: 600;">F</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">Between</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">k-1</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">SSB</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">MSB</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">MSB/MSW</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">Within</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">N-k</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">SSW</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">MSW</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">-</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">Total</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">N-1</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">SST</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">-</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">-</td>
                        </tr>
                    </table>
                    <p><strong>Where:</strong> k = number of groups, N = total sample size</p>
                </div>

                <h4>Calculating Sum of Squares</h4>

                <div class="formula-box">
                    <strong>Total Sum of Squares (SST):</strong>
                    <br>SST = Σᵢ(xᵢ - x̄)²
                    <br><br>
                    <strong>Between Groups Sum of Squares (SSB):</strong>
                    <br>SSB = Σⱼnⱼ(x̄ⱼ - x̄)²
                    <br><br>
                    <strong>Within Groups Sum of Squares (SSW):</strong>
                    <br>SSW = SST - SSB
                </div>

                <div class="example-box">
                    <h4>Worked Example: Pain Medication Study</h4>
                    <p><strong>Data:</strong></p>
                    <ul>
                        <li><strong>Medication A:</strong> 7, 8, 6, 9, 7 (n₁=5, x̄₁=7.4)</li>
                        <li><strong>Medication B:</strong> 5, 6, 4, 7, 5 (n₂=5, x̄₂=5.4)</li>
                        <li><strong>Placebo:</strong> 3, 4, 2, 5, 3 (n₃=5, x̄₃=3.4)</li>
                    </ul>
                    
                    <p><strong>Step 1: Calculate overall mean</strong></p>
                    <p>x̄ = (7.4×5 + 5.4×5 + 3.4×5) / 15 = 81/15 = 5.4</p>

                    <p><strong>Step 2: Calculate SSB</strong></p>
                    <p>SSB = 5×(7.4-5.4)² + 5×(5.4-5.4)² + 5×(3.4-5.4)²</p>
                    <p>SSB = 5×4 + 5×0 + 5×4 = 40</p>

                    <p><strong>Step 3: Calculate SST</strong></p>
                    <p>SST = (7-5.4)² + (8-5.4)² + ... + (3-5.4)² = 56</p>

                    <p><strong>Step 4: Calculate SSW</strong></p>
                    <p>SSW = SST - SSB = 56 - 40 = 16</p>

                    <p><strong>Step 5: Calculate Mean Squares</strong></p>
                    <p>MSB = SSB/(k-1) = 40/(3-1) = 20</p>
                    <p>MSW = SSW/(N-k) = 16/(15-3) = 1.33</p>

                    <p><strong>Step 6: Calculate F-statistic</strong></p>
                    <p>F = MSB/MSW = 20/1.33 = 15.0</p>

                    <p><strong>Step 7: Compare to critical value</strong></p>
                    <p>F₀.₀₅,₂,₁₂ = 3.89. Since 15.0 > 3.89, p < 0.05</p>
                    <p><strong>Conclusion:</strong> Reject H₀. At least one medication differs significantly.</p>
                </div>
            </div>

            <div id="section3-3" class="section">
                <h3 class="section-title">3.3 Post-Hoc Tests and Multiple Comparisons</h3>
                <div class="difficulty-level intermediate">Intermediate</div>

                <p>When ANOVA shows significant differences, <strong>post-hoc tests</strong> determine which specific groups differ from each other.</p>

                <div class="concept-box">
                    <h4>Why Post-Hoc Tests?</h4>
                    <p>ANOVA only tells us that "at least one group differs" but not:</p>
                    <ul>
                        <li>Which specific groups are different?</li>
                        <li>How many groups are different?</li>
                        <li>The magnitude of differences?</li>
                    </ul>
                    <p>Post-hoc tests provide pairwise comparisons while controlling family-wise error rate.</p>
                </div>

                <h4>Common Post-Hoc Tests</h4>

                <div class="example-box">
                    <h4>Tukey's HSD (Honestly Significant Difference)</h4>
                    <p><strong>When to use:</strong> Most common, good balance of power and control</p>
                    <p><strong>Formula:</strong> HSD = q × √(MSW/n)</p>
                    <p><strong>Advantage:</strong> Controls family-wise error rate at α</p>
                    <p><strong>Disadvantage:</strong> Requires equal sample sizes (or harmonic mean)</p>
                    
                    <p><strong>Interpretation:</strong> If |x̄ᵢ - x̄ⱼ| > HSD, groups i and j differ significantly</p>
                </div>

                <div class="example-box">
                    <h4>Bonferroni Correction</h4>
                    <p><strong>When to use:</strong> Conservative approach, few planned comparisons</p>
                    <p><strong>Method:</strong> Use α/c for each comparison (c = number of comparisons)</p>
                    <p><strong>Example:</strong> With 3 groups, 3 comparisons, use α = 0.05/3 = 0.017</p>
                    <p><strong>Advantage:</strong> Simple, very conservative</p>
                    <p><strong>Disadvantage:</strong> Can be overly conservative, reduced power</p>
                </div>

                <div class="example-box">
                    <h4>Scheffé's Test</h4>
                    <p><strong>When to use:</strong> Any possible comparison, not just pairwise</p>
                    <p><strong>Advantage:</strong> Most flexible, allows complex contrasts</p>
                    <p><strong>Disadvantage:</strong> Most conservative for simple pairwise comparisons</p>
                </div>

                <h4>Continuing Our Pain Medication Example</h4>

                <div class="example-box">
                    <h4>Post-Hoc Analysis</h4>
                    <p>We found F = 15.0, p < 0.05. Now let's determine which medications differ:</p>
                    
                    <p><strong>Tukey's HSD Calculation:</strong></p>
                    <p>HSD = q₀.₀₅,₃,₁₂ × √(MSW/n) = 3.77 × √(1.33/5) = 1.94</p>
                    
                    <p><strong>Pairwise Comparisons:</strong></p>
                    <ul>
                        <li>|Med A - Med B| = |7.4 - 5.4| = 2.0 > 1.94 ✓ <strong>Significant</strong></li>
                        <li>|Med A - Placebo| = |7.4 - 3.4| = 4.0 > 1.94 ✓ <strong>Significant</strong></li>
                        <li>|Med B - Placebo| = |5.4 - 3.4| = 2.0 > 1.94 ✓ <strong>Significant</strong></li>
                    </ul>
                    
                    <p><strong>Conclusion:</strong> All three treatments differ significantly from each other.</p>
                    <p><strong>Clinical Interpretation:</strong> Med A > Med B > Placebo for pain reduction.</p>
                </div>

                <div class="warning-box">
                    <h4>Common Mistakes in Post-Hoc Testing</h4>
                    <ul>
                        <li><strong>❌ Running post-hocs when ANOVA is not significant</strong> → Fishing for significance</li>
                        <li><strong>❌ Using multiple different post-hoc tests</strong> → Inflated error rates</li>
                        <li><strong>❌ Ignoring practical significance</strong> → Statistical ≠ clinical significance</li>
                        <li><strong>✅ Choose post-hoc test before analysis</strong> → Avoid bias</li>
                        <li><strong>✅ Report effect sizes</strong> → Practical importance</li>
                    </ul>
                </div>
            </div>

            <div id="section3-4" class="section">
                <h3 class="section-title">3.4 Two-Way ANOVA</h3>
                <div class="difficulty-level advanced">Advanced</div>

                <p>Two-way ANOVA examines the effects of two categorical variables (factors) simultaneously, including their potential interaction.</p>

                <div class="concept-box">
                    <h4>Advantages of Two-Way ANOVA</h4>
                    <ul>
                        <li><strong>Efficiency:</strong> Tests multiple factors in one analysis</li>
                        <li><strong>Interaction Detection:</strong> Identifies when factors work together</li>
                        <li><strong>Control:</strong> Accounts for additional sources of variation</li>
                        <li><strong>Power:</strong> Often more powerful than separate one-way ANOVAs</li>
                    </ul>
                </div>

                <h4>Three Research Questions</h4>

                <p>Two-way ANOVA addresses three hypotheses simultaneously:</p>

                <div class="formula-box">
                    <strong>Main Effect of Factor A:</strong> H₀: μ₁• = μ₂• = ... = μₐ•
                    <br><strong>Main Effect of Factor B:</strong> H₀: μ•₁ = μ•₂ = ... = μ•ᵦ
                    <br><strong>Interaction Effect:</strong> H₀: No A×B interaction
                </div>

                <div class="example-box">
                    <h4>Clinical Trial Example: Drug and Exercise</h4>
                    <p><strong>Research Question:</strong> Do cholesterol-lowering drugs and exercise programs interact?</p>
                    
                    <p><strong>Factor A (Drug):</strong> New drug vs. Placebo</p>
                    <p><strong>Factor B (Exercise):</strong> High intensity vs. Low intensity</p>
                    <p><strong>Outcome:</strong> Cholesterol reduction (mg/dL)</p>
                    
                    <p><strong>Design:</strong> 2×2 factorial design</p>
                    <ul>
                        <li>Group 1: New drug + High exercise (n=20)</li>
                        <li>Group 2: New drug + Low exercise (n=20)</li>
                        <li>Group 3: Placebo + High exercise (n=20)</li>
                        <li>Group 4: Placebo + Low exercise (n=20)</li>
                    </ul>
                </div>

                <h4>Understanding Interactions</h4>

                <div class="concept-box">
                    <h4>Types of Interaction Effects</h4>
                    <p><strong>No Interaction:</strong> Effect of Factor A is the same at all levels of Factor B</p>
                    <p><strong>Ordinal Interaction:</strong> Effect of Factor A varies in magnitude but not direction</p>
                    <p><strong>Disordinal Interaction:</strong> Effect of Factor A changes direction at different levels of Factor B</p>
                </div>

                <div class="example-box">
                    <h4>Interpreting Interaction: Hypothetical Results</h4>
                    <p><strong>Scenario 1: No Interaction</strong></p>
                    <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                        <tr style="background: #e2e8f0;">
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;"></td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem; font-weight: 600;">High Exercise</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem; font-weight: 600;">Low Exercise</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem; font-weight: 600;">Difference</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem; font-weight: 600;">New Drug</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">40 mg/dL</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">30 mg/dL</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">10 mg/dL</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem; font-weight: 600;">Placebo</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">20 mg/dL</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">10 mg/dL</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">10 mg/dL</td>
                        </tr>
                    </table>
                    <p><strong>Interpretation:</strong> Exercise always improves cholesterol by 10 mg/dL, regardless of drug</p>

                    <p><strong>Scenario 2: Significant Interaction</strong></p>
                    <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                        <tr style="background: #e2e8f0;">
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;"></td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem; font-weight: 600;">High Exercise</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem; font-weight: 600;">Low Exercise</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem; font-weight: 600;">Difference</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem; font-weight: 600;">New Drug</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">50 mg/dL</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">25 mg/dL</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">25 mg/dL</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem; font-weight: 600;">Placebo</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">15 mg/dL</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">10 mg/dL</td>
                            <td style="border: 1px solid #a0aec0; padding: 0.5rem;">5 mg/dL</td>
                        </tr>
                    </table>
                    <p><strong>Interpretation:</strong> The drug works much better with high exercise (synergistic effect)</p>
                </div>

                <div class="warning-box">
                    <h4>Interpreting Two-Way ANOVA Results</h4>
                    <p><strong>If interaction is significant:</strong></p>
                    <ul>
                        <li>Focus primarily on interaction interpretation</li>
                        <li>Main effects may be misleading</li>
                        <li>Use simple effects analysis or interaction contrasts</li>
                    </ul>
                    
                    <p><strong>If interaction is not significant:</strong></p>
                    <ul>
                        <li>Interpret main effects independently</li>
                        <li>Each factor's effect is consistent across levels of the other</li>
                    </ul>
                </div>
            </div>

            <div id="section3-5" class="section">
                <h3 class="section-title">3.5 ANOVA in Practice: Assumptions and Alternatives</h3>
                <div class="difficulty-level intermediate">Intermediate</div>

                <h4>When ANOVA Assumptions Fail</h4>

                <div class="warning-box">
                    <h4>Assumption Violations and Solutions</h4>
                    <p><strong>Non-normality:</strong></p>
                    <ul>
                        <li><strong>Mild violation:</strong> ANOVA is robust (central limit theorem)</li>
                        <li><strong>Severe violation:</strong> Use Kruskal-Wallis test (non-parametric)</li>
                        <li><strong>Transformation:</strong> Log, square root, or Box-Cox transformations</li>
                    </ul>

                    <p><strong>Unequal variances:</strong></p>
                    <ul>
                        <li><strong>Welch's ANOVA:</strong> Doesn't assume equal variances</li>
                        <li><strong>Brown-Forsythe test:</strong> Robust to variance differences</li>
                        <li><strong>Transformation:</strong> Often stabilizes variances</li>
                    </ul>

                    <p><strong>Non-independence:</strong></p>
                    <ul>
                        <li><strong>Most serious violation</strong> → Inflated Type I error</li>
                        <li><strong>Solutions:</strong> Mixed-effects models, cluster-robust standard errors</li>
                        <li><strong>Design fix:</strong> Proper randomization, account for clustering</li>
                    </ul>
                </div>

                <h4>Effect Size and Practical Significance</h4>

                <div class="concept-box">
                    <h4>Effect Size Measures for ANOVA</h4>
                    <p><strong>Eta-squared (η²):</strong> Proportion of total variance explained</p>
                    <p>η² = SSB / SST</p>
                    
                    <p><strong>Partial Eta-squared:</strong> More common in complex designs</p>
                    <p>ηₚ² = SSB / (SSB + SSW)</p>
                    
                    <p><strong>Cohen's Guidelines:</strong></p>
                    <ul>
                        <li>Small effect: η² = 0.01</li>
                        <li>Medium effect: η² = 0.06</li>
                        <li>Large effect: η² = 0.14</li>
                    </ul>
                </div>

                <div class="example-box">
                    <h4>Reporting ANOVA Results</h4>
                    <p><strong>Complete ANOVA Report:</strong></p>
                    <p>"A one-way ANOVA was conducted to compare the effectiveness of three pain medications. The analysis revealed a statistically significant difference between groups, F(2, 12) = 15.0, p < 0.001, η² = 0.71, indicating a large effect size.</p>
                    
                    <p>Post-hoc comparisons using Tukey's HSD test indicated that all pairwise comparisons were statistically significant (p < 0.05). Medication A (M = 7.4, SD = 1.1) was more effective than Medication B (M = 5.4, SD = 1.1), which was more effective than Placebo (M = 3.4, SD = 1.1)."</p>
                </div>

                <h4>Power Analysis for ANOVA</h4>

                <div class="concept-box">
                    <h4>Sample Size Planning</h4>
                    <p>Power analysis helps determine appropriate sample sizes before conducting research:</p>
                    <ul>
                        <li><strong>Specify:</strong> Effect size, significance level (α), desired power</li>
                        <li><strong>Effect size:</strong> Based on pilot data or literature</li>
                        <li><strong>Common power:</strong> 0.80 (80% chance of detecting true effect)</li>
                        <li><strong>Balance:</strong> Equal sample sizes maximize power</li>
                    </ul>
                </div>

                <div class="example-box">
                    <h4>Power Analysis Example</h4>
                    <p><strong>Research Planning:</strong> Comparing 4 treatments for depression</p>
                    <ul>
                        <li><strong>Expected effect size:</strong> f = 0.25 (medium effect)</li>
                        <li><strong>Significance level:</strong> α = 0.05</li>
                        <li><strong>Desired power:</strong> 0.80</li>
                        <li><strong>Result:</strong> Need n = 45 per group (180 total)</li>
                    </ul>
                    <p><strong>Interpretation:</strong> With 45 participants per group, we have an 80% chance of detecting a medium-sized difference if it truly exists.</p>
                </div>
            </div>
        </div>

        <div id="chapter4" class="chapter">
            <h2 class="chapter-title">Chapter 4: Interrelationships & Modeling</h2>
            <div class="reading-time">📖 Reading time: 50 minutes</div>
            <p class="chapter-intro">Move beyond simple group comparisons to understand relationships between variables and build predictive models.</p>
        </div>

        <div id="chapter5" class="chapter">
            <h2 class="chapter-title">Chapter 5: Design & Power Considerations</h2>
            <div class="reading-time">📖 Reading time: 35 minutes</div>
            <p class="chapter-intro">Plan studies effectively by determining appropriate sample sizes and control error rates when testing multiple hypotheses.</p>
        </div>

        <div id="chapter6" class="chapter">
            <h2 class="chapter-title">Chapter 6: Specialized & Modern Methods</h2>
            <div class="reading-time">📖 Reading time: 60 minutes</div>
            <p class="chapter-intro">Advanced techniques for complex data scenarios, from time-to-event analysis to modern computational approaches in the era of big data.</p>
        </div>

        <footer style="text-align: center; padding: 3rem 0; border-top: 2px solid #e2e8f0; margin-top: 4rem;">
            <div class="concept-box">
                <h4>About the Author</h4>
                <p><strong>Pawan Rama Mali</strong> is a biostatistician and educator passionate about making complex statistical concepts accessible to researchers and clinicians.</p>
                <p>Contact: <a href="mailto:prm@outlook.in">prm@outlook.in</a> | GitHub: <a href="https://github.com/PawanRamaMali">PawanRamaMali</a></p>
            </div>
            <p style="margin-top: 2rem; color: #4a5568;"><em>Licensed under MIT License | © 2025 BioStatica</em></p>
        </footer>
    </div>

    <!-- Mobile PDF Download Button (visible only on smaller screens) -->
    <button id="mobilePdfBtn" class="mobile-pdf-btn" onclick="generatePDF()">
        📄 Download PDF
    </button>

    <div class="progress-tracker">
        <h3>Learning Progress</h3>
        
        <div class="progress-section">
            <div class="progress-chapter" data-target="introduction" onclick="scrollToSection('introduction')">
                <button class="bookmark-btn" onclick="toggleBookmark(event, 'introduction')" title="Bookmark this section">📌</button>
                Introduction
            </div>
        </div>

        <div class="progress-section">
            <div class="progress-chapter" data-target="chapter1" onclick="scrollToSection('chapter1')">
                <button class="bookmark-btn" onclick="toggleBookmark(event, 'chapter1')" title="Bookmark this chapter">📌</button>
                Ch 1: Foundations
            </div>
            <div class="progress-subsection" data-target="section1-1" onclick="scrollToSection('section1-1')">1.1 Descriptive Statistics</div>
            <div class="progress-subsection" data-target="section1-2" onclick="scrollToSection('section1-2')">1.2 Probability</div>
            <div class="progress-subsection" data-target="section1-3" onclick="scrollToSection('section1-3')">1.3 Sampling</div>
            <div class="progress-subsection" data-target="section1-4" onclick="scrollToSection('section1-4')">1.4 Estimation</div>
            <div class="progress-subsection" data-target="section1-5" onclick="scrollToSection('section1-5')">1.5 Hypothesis Testing</div>
            <div class="progress-subsection" data-target="section1-6" onclick="scrollToSection('section1-6')">1.6 t-Tests</div>
        </div>

        <div class="progress-section">
            <div class="progress-chapter" data-target="chapter2" onclick="scrollToSection('chapter2')">
                <button class="bookmark-btn" onclick="toggleBookmark(event, 'chapter2')" title="Bookmark this chapter">📌</button>
                Ch 2: Comparisons
            </div>
            <div class="progress-subsection" data-target="section2-1" onclick="scrollToSection('section2-1')">2.1 Welch's & Paired t-Test</div>
        </div>

        <div class="progress-section">
            <div class="progress-chapter" data-target="chapter3" onclick="scrollToSection('chapter3')">
                <button class="bookmark-btn" onclick="toggleBookmark(event, 'chapter3')" title="Bookmark this chapter">📌</button>
                Ch 3: Multi-Group
            </div>
            <div class="progress-subsection" data-target="section3-1" onclick="scrollToSection('section3-1')">3.1 Introduction to ANOVA</div>
            <div class="progress-subsection" data-target="section3-2" onclick="scrollToSection('section3-2')">3.2 One-Way ANOVA</div>
            <div class="progress-subsection" data-target="section3-3" onclick="scrollToSection('section3-3')">3.3 Post-Hoc Tests</div>
            <div class="progress-subsection" data-target="section3-4" onclick="scrollToSection('section3-4')">3.4 Two-Way ANOVA</div>
            <div class="progress-subsection" data-target="section3-5" onclick="scrollToSection('section3-5')">3.5 Assumptions & Alternatives</div>
        </div>

        <div class="progress-section">
            <div class="progress-chapter" data-target="chapter4" onclick="scrollToSection('chapter4')">
                <button class="bookmark-btn" onclick="toggleBookmark(event, 'chapter4')" title="Bookmark this chapter">📌</button>
                Ch 4: Modeling
            </div>
        </div>

        <div class="progress-section">
            <div class="progress-chapter" data-target="chapter5" onclick="scrollToSection('chapter5')">
                <button class="bookmark-btn" onclick="toggleBookmark(event, 'chapter5')" title="Bookmark this chapter">📌</button>
                Ch 5: Design & Power
            </div>
        </div>

        <div class="progress-section">
            <div class="progress-chapter" data-target="chapter6" onclick="scrollToSection('chapter6')">
                <button class="bookmark-btn" onclick="toggleBookmark(event, 'chapter6')" title="Bookmark this chapter">📌</button>
                Ch 6: Advanced Methods
            </div>
        </div>

        <div class="reading-progress">
            <div class="reading-progress-text">Reading Progress</div>
            <div class="reading-progress-bar">
                <div class="reading-progress-fill" id="progressFill"></div>
            </div>
        </div>

        <!-- PDF Download Button -->
        <div class="pdf-download-container">
            <button id="downloadPdfBtn" class="pdf-download-btn" onclick="generatePDF()">
                📄 PDF
            </button>
            <div id="pdfStatus" class="pdf-status"></div>
        </div>
    </div>

    <script>
        // Enhanced progress tracking and navigation
        let bookmarkedSections = JSON.parse(localStorage.getItem('biostatica-bookmarks') || '[]');
        let completedSections = JSON.parse(localStorage.getItem('biostatica-completed') || '[]');
        let readingSessions = JSON.parse(localStorage.getItem('biostatica-sessions') || '{}');

        // Smooth scrolling function
        function scrollToSection(elementId) {
            const element = document.getElementById(elementId);
            if (element) {
                element.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
                
                // Update URL hash for bookmarkable links
                history.pushState(null, null, '#' + elementId);
                
                // Track section visit
                trackSectionVisit(elementId);
            }
        }

        // Bookmark functionality
        function toggleBookmark(event, sectionId) {
            event.stopPropagation();
            const index = bookmarkedSections.indexOf(sectionId);
            const button = event.target;
            const chapterElement = button.parentElement;
            
            if (index > -1) {
                bookmarkedSections.splice(index, 1);
                chapterElement.classList.remove('bookmarked');
                button.innerHTML = '📌';
            } else {
                bookmarkedSections.push(sectionId);
                chapterElement.classList.add('bookmarked');
                button.innerHTML = '🔖';
            }
            
            localStorage.setItem('biostatica-bookmarks', JSON.stringify(bookmarkedSections));
        }

        // Track section visits and reading time
        function trackSectionVisit(sectionId) {
            const now = Date.now();
            if (!readingSessions[sectionId]) {
                readingSessions[sectionId] = {
                    visits: 0,
                    totalTime: 0,
                    lastVisit: now,
                    startTime: now
                };
            }
            
            readingSessions[sectionId].visits++;
            readingSessions[sectionId].lastVisit = now;
            readingSessions[sectionId].startTime = now;
            
            localStorage.setItem('biostatica-sessions', JSON.stringify(readingSessions));
        }

        // Mark section as completed after sufficient reading time
        function markSectionCompleted(sectionId) {
            if (!completedSections.includes(sectionId)) {
                completedSections.push(sectionId);
                localStorage.setItem('biostatica-completed', JSON.stringify(completedSections));
                
                const element = document.querySelector(`[data-target="${sectionId}"]`);
                if (element) {
                    element.classList.add('completed');
                }
            }
        }

        // Update active section in progress tracker
        function updateProgressTracker() {
            const sections = ['introduction', 'chapter1', 'chapter2', 'chapter3', 'chapter4', 'chapter5', 'chapter6'];
            const subsections = ['section1-1', 'section1-2', 'section1-3', 'section1-4', 'section1-5', 'section1-6', 'section2-1', 'section3-1', 'section3-2', 'section3-3', 'section3-4', 'section3-5'];
            const allSections = [...sections, ...subsections];
            
            const progressItems = document.querySelectorAll('.progress-chapter, .progress-subsection');
            
            let currentSection = '';
            const scrollPos = window.scrollY + 150;
            
            // Find current section
            allSections.forEach(sectionId => {
                const element = document.getElementById(sectionId);
                if (element && element.offsetTop <= scrollPos) {
                    currentSection = sectionId;
                }
            });
            
            // Update active states
            progressItems.forEach(item => {
                const target = item.getAttribute('data-target');
                if (target === currentSection) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });

            // Update scroll indicator
            updateScrollIndicator();
            
            // Update reading progress
            updateReadingProgress();
            
            // Track reading time
            if (currentSection && readingSessions[currentSection]) {
                const session = readingSessions[currentSection];
                const timeSpent = Date.now() - session.startTime;
                session.totalTime += timeSpent;
                session.startTime = Date.now();
                
                // Mark as completed after 2 minutes of reading
                if (session.totalTime > 120000) {
                    markSectionCompleted(currentSection);
                }
                
                localStorage.setItem('biostatica-sessions', JSON.stringify(readingSessions));
            }
        }

        // Update scroll indicator
        function updateScrollIndicator() {
            const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = (winScroll / height) * 100;
            
            const indicator = document.getElementById('scrollIndicator');
            indicator.style.transform = `scaleX(${scrolled / 100})`;
        }

        // Update reading progress bar
        function updateReadingProgress() {
            const totalSections = 13; // Total number of sections/chapters
            const completedCount = completedSections.length;
            const progressPercentage = (completedCount / totalSections) * 100;
            
            const progressFill = document.getElementById('progressFill');
            progressFill.style.width = progressPercentage + '%';
        }

        // Initialize bookmarks and completed sections on load
        function initializeProgress() {
            // Restore bookmarks
            bookmarkedSections.forEach(sectionId => {
                const element = document.querySelector(`[data-target="${sectionId}"]`);
                if (element) {
                    element.classList.add('bookmarked');
                    const button = element.querySelector('.bookmark-btn');
                    if (button) {
                        button.innerHTML = '🔖';
                    }
                }
            });
            
            // Restore completed sections
            completedSections.forEach(sectionId => {
                const element = document.querySelector(`[data-target="${sectionId}"]`);
                if (element) {
                    element.classList.add('completed');
                }
            });
            
            updateReadingProgress();
        }

        // Handle hash navigation
        function handleHashNavigation() {
            const hash = window.location.hash.substring(1);
            if (hash) {
                setTimeout(() => scrollToSection(hash), 100);
            }
        }

        // Smooth scrolling for all links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                scrollToSection(targetId);
            });
        });

        // Event listeners
        window.addEventListener('scroll', updateProgressTracker);
        window.addEventListener('hashchange', handleHashNavigation);

        // Wait for jsPDF library to load
        function waitForJsPDF() {
            return new Promise((resolve, reject) => {
                let attempts = 0;
                const maxAttempts = 50; // 5 seconds
                
                function checkLibrary() {
                    attempts++;
                    if (typeof window.jspdf !== 'undefined') {
                        console.log('jsPDF is ready via window.jspdf!');
                        resolve(window.jspdf);
                    } else if (typeof jsPDF !== 'undefined') {
                        console.log('jsPDF is ready as global variable!');
                        resolve({ jsPDF: jsPDF });
                    } else if (attempts >= maxAttempts) {
                        reject(new Error('jsPDF library failed to load after 5 seconds'));
                    } else {
                        setTimeout(checkLibrary, 100);
                    }
                }
                
                checkLibrary();
            });
        }


        // Enhanced PDF Generation Function with proper page breaks and TOC
        async function generatePDF() {
            const button = document.getElementById('downloadPdfBtn');
            const mobileButton = document.getElementById('mobilePdfBtn');
            const statusDiv = document.getElementById('pdfStatus');
            
            // Disable both buttons
            if (button) {
                button.disabled = true;
                button.innerHTML = '⏳ Generating...';
            }
            if (mobileButton) {
                mobileButton.disabled = true;
                mobileButton.innerHTML = '⏳ Generating PDF...';
            }
            
            // Show status (only if statusDiv exists, for desktop)
            if (statusDiv) {
                statusDiv.className = 'pdf-status generating';
                statusDiv.innerHTML = 'Initializing PDF generation...';
            }

            try {
                // Wait for jsPDF to be available
                if (statusDiv) statusDiv.innerHTML = 'Loading PDF library...';
                
                console.log('Starting PDF generation...');
                const jsPDFModule = await waitForJsPDF();
                console.log('PDF library loaded successfully');
                
                const { jsPDF } = jsPDFModule;
                const pdf = new jsPDF('p', 'mm', 'a4');
                
                // PDF settings
                const pageWidth = 210;
                const pageHeight = 297;
                const margin = 20;
                const lineHeight = 6;
                const contentWidth = pageWidth - (2 * margin);
                let currentY = margin;
                let pageNumber = 1;
                
                if (statusDiv) statusDiv.innerHTML = 'Generating title page...';

                // Set fonts
                pdf.setFont('helvetica', 'bold');
                
                // Title Page
                pdf.setFontSize(24);
                pdf.text('BioStatica', pageWidth / 2, 60, { align: 'center' });
                
                pdf.setFontSize(16);
                pdf.setFont('helvetica', 'normal');
                pdf.text('A Complete Guide to Biostatistics:', pageWidth / 2, 80, { align: 'center' });
                pdf.text('From Foundations to Advanced Methods', pageWidth / 2, 90, { align: 'center' });
                
                pdf.setFontSize(14);
                pdf.text('By Pawan Rama Mali', pageWidth / 2, 120, { align: 'center' });
                
                pdf.setFontSize(12);
                pdf.text('A comprehensive textbook for beginners to experts', pageWidth / 2, 140, { align: 'center' });
                
                // Add date
                const titleNow = new Date();
                const titleDateStr = titleNow.toLocaleDateString('en-US', { 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
                pdf.text(titleDateStr, pageWidth / 2, pageHeight - 40, { align: 'center' });

                // Function to add page number
                function addPageNumber() {
                    pdf.setFontSize(10);
                    pdf.setFont('helvetica', 'normal');
                    pdf.text(`Page ${pageNumber}`, pageWidth - margin, pageHeight - 10, { align: 'right' });
                    pageNumber++;
                }

                // Function to check if new page is needed
                function checkNewPage(requiredSpace = 20) {
                    if (currentY + requiredSpace > pageHeight - 30) {
                        addPageNumber();
                        pdf.addPage();
                        currentY = margin;
                        return true;
                    }
                    return false;
                }

                // Function to add text with word wrapping
                function addText(text, fontSize = 11, fontStyle = 'normal', maxWidth = contentWidth, color = [0, 0, 0]) {
                    pdf.setFontSize(fontSize);
                    pdf.setFont('helvetica', fontStyle);
                    pdf.setTextColor(color[0], color[1], color[2]);
                    
                    const lines = pdf.splitTextToSize(text, maxWidth);
                    const textHeight = lines.length * lineHeight;
                    
                    checkNewPage(textHeight);
                    
                    lines.forEach(line => {
                        pdf.text(line, margin, currentY);
                        currentY += lineHeight;
                    });
                    
                    return textHeight;
                }

                if (statusDiv) statusDiv.innerHTML = 'Creating table of contents...';

                // New page for TOC
                addPageNumber();
                pdf.addPage();
                currentY = margin;

                // Table of Contents
                pdf.setFontSize(18);
                pdf.setFont('helvetica', 'bold');
                pdf.text('Table of Contents', margin, currentY);
                currentY += 15;

                const tocItems = [
                    { title: 'Introduction: Welcome to Biostatistics', page: pageNumber + 1 },
                    { title: 'Chapter 1: Foundational Concepts', page: pageNumber + 2 },
                    { title: '  1.1 Descriptive Statistics & Visualization', page: pageNumber + 3 },
                    { title: '  1.2 Probability & Distributions', page: pageNumber + 5 },
                    { title: '  1.3 Sampling & Sampling Distributions', page: pageNumber + 7 },
                    { title: '  1.4 Point & Interval Estimation', page: pageNumber + 9 },
                    { title: '  1.5 Hypothesis Testing Framework', page: pageNumber + 11 },
                    { title: '  1.6 One-Sample & Two-Sample t-Tests', page: pageNumber + 15 },
                    { title: 'Chapter 2: Comparative Inference', page: pageNumber + 17 },
                    { title: '  2.1 Welch\'s t-Test & Paired t-Test', page: pageNumber + 18 },
                    { title: 'Chapter 3: Multi-Group Analysis', page: pageNumber + 19 },
                    { title: 'Chapter 4: Interrelationships & Modeling', page: pageNumber + 20 },
                    { title: 'Chapter 5: Design & Power Considerations', page: pageNumber + 21 },
                    { title: 'Chapter 6: Specialized & Modern Methods', page: pageNumber + 22 }
                ];

                pdf.setFontSize(12);
                pdf.setFont('helvetica', 'normal');

                tocItems.forEach(item => {
                    checkNewPage();
                    const dots = '.'.repeat(Math.floor((contentWidth - pdf.getTextWidth(item.title) - pdf.getTextWidth(item.page.toString())) / pdf.getTextWidth('.')));
                    pdf.text(`${item.title} ${dots} ${item.page}`, margin, currentY);
                    currentY += 8;
                });

                if (statusDiv) statusDiv.innerHTML = 'Processing content sections...';

                // Content sections
                const sections = [
                    {
                        id: 'introduction',
                        title: 'Introduction: Welcome to Biostatistics',
                        content: document.getElementById('introduction')
                    },
                    {
                        id: 'chapter1',
                        title: 'Chapter 1: Foundational Concepts',
                        content: document.getElementById('chapter1')
                    },
                    {
                        id: 'chapter2',
                        title: 'Chapter 2: Comparative Inference',
                        content: document.getElementById('chapter2')
                    },
                    {
                        id: 'chapter3',
                        title: 'Chapter 3: Multi-Group Analysis',
                        content: document.getElementById('chapter3')
                    },
                    {
                        id: 'chapter4',
                        title: 'Chapter 4: Interrelationships & Modeling',
                        content: document.getElementById('chapter4')
                    },
                    {
                        id: 'chapter5',
                        title: 'Chapter 5: Design & Power Considerations',
                        content: document.getElementById('chapter5')
                    },
                    {
                        id: 'chapter6',
                        title: 'Chapter 6: Specialized & Modern Methods',
                        content: document.getElementById('chapter6')
                    }
                ];

                function processElement(element, isFirstLevel = true) {
                    if (!element) return;

                    const tagName = element.tagName?.toLowerCase();
                    const text = element.textContent?.trim();
                    
                    if (!text) return;

                    switch (tagName) {
                        case 'h2':
                            if (element.classList.contains('chapter-title')) {
                                checkNewPage(40);
                                addPageNumber();
                                pdf.addPage();
                                currentY = margin;
                                addText(text, 18, 'bold');
                                currentY += 10;
                            }
                            break;
                            
                        case 'h3':
                            if (element.classList.contains('section-title')) {
                                checkNewPage(25);
                                currentY += 5;
                                addText(text, 14, 'bold');
                                currentY += 5;
                            }
                            break;
                            
                        case 'h4':
                            checkNewPage(20);
                            currentY += 3;
                            addText(text, 12, 'bold');
                            currentY += 3;
                            break;
                            
                        case 'p':
                            if (text && !element.classList.contains('chapter-intro') && !element.classList.contains('reading-time')) {
                                checkNewPage(15);
                                addText(text, 11, 'normal');
                                currentY += 3;
                            } else if (element.classList.contains('chapter-intro')) {
                                checkNewPage(20);
                                addText(text, 12, 'italic');
                                currentY += 8;
                            }
                            break;
                            
                        case 'ul':
                        case 'ol':
                            const listItems = element.querySelectorAll('li');
                            listItems.forEach(li => {
                                const liText = li.textContent?.trim();
                                if (liText) {
                                    checkNewPage(10);
                                    addText(`• ${liText}`, 11, 'normal', contentWidth - 10);
                                }
                            });
                            currentY += 5;
                            break;
                            
                        case 'div':
                            if (element.classList.contains('concept-box')) {
                                checkNewPage(30);
                                currentY += 5;
                                
                                // Add colored background effect with border
                                pdf.setDrawColor(49, 130, 206);
                                pdf.setLineWidth(2);
                                pdf.line(margin, currentY - 3, margin, currentY + 25);
                                
                                const h4 = element.querySelector('h4');
                                if (h4) {
                                    addText(h4.textContent, 12, 'bold', contentWidth - 10, [49, 130, 206]);
                                }
                                
                                const content = element.textContent.replace(h4?.textContent || '', '').trim();
                                if (content) {
                                    addText(content, 11, 'normal', contentWidth - 10);
                                }
                                currentY += 8;
                                
                            } else if (element.classList.contains('example-box')) {
                                checkNewPage(30);
                                currentY += 5;
                                
                                pdf.setDrawColor(56, 161, 105);
                                pdf.setLineWidth(2);
                                pdf.line(margin, currentY - 3, margin, currentY + 25);
                                
                                const h4 = element.querySelector('h4');
                                if (h4) {
                                    addText(h4.textContent, 12, 'bold', contentWidth - 10, [56, 161, 105]);
                                }
                                
                                const content = element.textContent.replace(h4?.textContent || '', '').trim();
                                if (content) {
                                    addText(content, 11, 'normal', contentWidth - 10);
                                }
                                currentY += 8;
                                
                            } else if (element.classList.contains('warning-box')) {
                                checkNewPage(30);
                                currentY += 5;
                                
                                pdf.setDrawColor(245, 158, 11);
                                pdf.setLineWidth(2);
                                pdf.line(margin, currentY - 3, margin, currentY + 25);
                                
                                const h4 = element.querySelector('h4');
                                if (h4) {
                                    addText(h4.textContent, 12, 'bold', contentWidth - 10, [245, 158, 11]);
                                }
                                
                                const content = element.textContent.replace(h4?.textContent || '', '').trim();
                                if (content) {
                                    addText(content, 11, 'normal', contentWidth - 10);
                                }
                                currentY += 8;
                                
                            } else if (element.classList.contains('formula-box')) {
                                checkNewPage(20);
                                currentY += 5;
                                
                                pdf.setDrawColor(246, 173, 85);
                                pdf.setFillColor(254, 245, 231);
                                pdf.rect(margin, currentY - 3, contentWidth, 15, 'FD');
                                
                                addText(text, 12, 'bold', contentWidth, [116, 66, 16]);
                                currentY += 8;
                            } else {
                                // Process child elements
                                Array.from(element.children).forEach(child => processElement(child, false));
                            }
                            break;
                            
                        case 'table':
                            checkNewPage(40);
                            currentY += 5;
                            
                            const rows = element.querySelectorAll('tr');
                            rows.forEach(row => {
                                const cells = row.querySelectorAll('td');
                                let startX = margin;
                                const cellWidth = contentWidth / cells.length;
                                
                                cells.forEach(cell => {
                                    const cellText = cell.textContent?.trim();
                                    if (cellText) {
                                        pdf.setDrawColor(160, 174, 192);
                                        pdf.rect(startX, currentY - 3, cellWidth, 10);
                                        pdf.text(cellText, startX + 2, currentY + 2);
                                        startX += cellWidth;
                                    }
                                });
                                currentY += 10;
                            });
                            currentY += 5;
                            break;
                    }
                }

                // Process each section
                sections.forEach((section, index) => {
                    if (statusDiv) statusDiv.innerHTML = `Processing ${section.title}...`;
                    
                    if (section.content) {
                        Array.from(section.content.children).forEach(child => processElement(child));
                    }
                });

                // Add final page number
                addPageNumber();

                if (statusDiv) statusDiv.innerHTML = 'Finalizing PDF...';

                // Generate filename with current date
                const completeNow = new Date();
                const completeDateStr = completeNow.toISOString().split('T')[0];
                const filename = `BioStatica_Complete_Guide_${completeDateStr}.pdf`;

                // Download the PDF
                pdf.save(filename);

                // Show success status
                console.log('PDF generation completed successfully');
                if (statusDiv) {
                    statusDiv.className = 'pdf-status success';
                    statusDiv.innerHTML = `✅ Complete PDF generated successfully!`;
                } else {
                    // Show alert for mobile users
                    alert('✅ Complete BioStatica guide downloaded successfully!');
                }

            } catch (error) {
                console.error('PDF generation error:', error);
                
                // Show error status
                if (statusDiv) {
                    statusDiv.className = 'pdf-status error';
                    statusDiv.innerHTML = '❌ Error generating PDF. Please try again.';
                } else {
                    // Show alert for mobile users
                    alert('Error generating PDF. Please try again.');
                }
            } finally {
                // Reset buttons
                if (button) {
                    button.disabled = false;
                    button.innerHTML = '📄 PDF';
                }
                if (mobileButton) {
                    mobileButton.disabled = false;
                    mobileButton.innerHTML = '📄 Download PDF';
                }

                // Hide status after 8 seconds
                if (statusDiv) {
                    setTimeout(() => {
                        statusDiv.className = 'pdf-status';
                    }, 8000);
                }
            }
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeProgress();
            updateProgressTracker();
            handleHashNavigation();
            
            // Check library loading status
            setTimeout(function() {
                if (typeof window.jspdf !== 'undefined') {
                    console.log('✅ jsPDF loaded successfully');
                } else if (typeof jsPDF !== 'undefined') {
                    console.log('✅ jsPDF loaded successfully as global');
                } else {
                    console.error('❌ jsPDF failed to load');
                }
            }, 1000);
            
            // Add event listeners for PDF buttons as backup
            const pdfBtn = document.getElementById('downloadPdfBtn');
            const mobilePdfBtn = document.getElementById('mobilePdfBtn');
            
            if (pdfBtn) {
                console.log('Adding event listener to desktop PDF button');
                pdfBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Desktop PDF button clicked via event listener');
                    generatePDF();
                });
            }
            
            if (mobilePdfBtn) {
                console.log('Adding event listener to mobile PDF button');
                mobilePdfBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Mobile PDF button clicked via event listener');
                    generatePDF();
                });
            }
        });
    </script>
</body>
</html>